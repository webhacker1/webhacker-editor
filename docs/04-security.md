# Безопасность: что есть и что обязательно сделать

Про текущую защиту и обязательные шаги на стороне приложения.

## 1) Что делает библиотека

1. Чистит HTML через sanitize.
2. Убирает опасные теги и атрибуты.
3. Убирает `on*`-обработчики (`onclick` и т.д.).
4. Фильтрует ссылки (`href`).
5. На paste вставляет только текст (без чужого HTML-оформления).

## 2) Где это в коде

1. `sanitize/sanitize.js` — вход.
2. `sanitize/nodes.js` — фильтр тегов.
3. `sanitize/attributes.js` — фильтр атрибутов.
4. `sanitize/styles.js` — фильтр inline-style.
5. `sanitize/utils.js` — утилиты вроде `sanitizeHref`.

## 3) Что библиотека НЕ может сделать за сервер

1. Не защищает SQL сама по себе.
2. Не заменяет серверную валидацию.
3. Не гарантирует безопасность, если raw HTML рендерится без очистки.

## 4) Что обязательно должен сделать backend

1. Использовать параметризованные SQL-запросы.
2. Валидировать входные данные.
3. Ограничивать размер контента.
4. Не доверять данным с клиента.

## 5) Рекомендуемый безопасный поток

1. В редакторе брать `editor.getHTML()`.
2. Сохранять это значение в БД.
3. На view перед `innerHTML` еще раз запускать sanitize.
4. После вставки HTML запускать подсветку code block.

## 6) Что дальше

Следующий файл:

1. `docs/05-testing.md`
