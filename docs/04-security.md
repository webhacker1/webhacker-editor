# Безопасность

## Что защищается на фронтенде

Проект защищает отображение и хранение пользовательского HTML от XSS/инъекций через:

1. Белый список тегов (`constants/allowedTags.js`)
2. Чистку атрибутов (`sanitize/attributes.js`)
3. Чистку inline-стилей (`sanitize/styles.js`)
4. Чистку URL (`sanitize/utils.js`, `sanitizeHref`)
5. Удаление inline event handlers (`on*`) в `sanitize/attributes.js`

## Ключевые ограничения

1. Опасные схемы URL блокируются (`javascript:`, неизвестные схемы).
2. Для ссылок принудительно ставятся:
   - `target="_blank"`
   - `rel="noopener noreferrer nofollow ugc"`
3. Неподдерживаемые теги и атрибуты удаляются.
4. Комментарии HTML удаляются.

## Что НЕ может гарантировать фронтенд

1. Полную защиту БД от SQL-инъекций.
2. Безопасность серверной бизнес-логики.

Причина: SQL-инъекции предотвращаются только на backend:

1. Параметризованные запросы (`prepared statements`).
2. Никакой конкатенации SQL из пользовательского текста.
3. ORM/query builder с bind-параметрами.

## Рекомендации для backend

1. Хранить очищенный HTML (или очищать повторно на сервере).
2. Перед любыми SQL-операциями использовать параметры.
3. Логи и алерты на аномальные payload.
4. Ограничивать длину пользовательского ввода.

## Проверка безопасности в проекте

1. `tests/sanitize.utils.test.js`
2. `tests/sanitize.html.test.js`

Запуск:

```bash
npm test
```

